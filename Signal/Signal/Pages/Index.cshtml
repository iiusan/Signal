@page
@using System.Security.Claims;

@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="modal-body row" style="height:100%; margin-top:-30px;">
    <div class="col-md-3" style="padding:0; margin-top:30px;height:10vh">
        <div class="row">
            @await Component.InvokeAsync("CurrentUser")
        </div>
        <div class="row" style="height:90vh;margin:0 auto;padding:0;">
            <div id="contacts-container" class="col-lg-3" style="max-height:90vh; width:100%; overflow: auto;">
                @await Component.InvokeAsync("Contacts")
                @*<div class="contact" guid="{u-guid}">
                        <div class="row">
                            <h4>{contact-first-name} {contact-last-name}</h4>
                            <h5>{contact-email}</h5>
                        </div>
                        <div class="row" hidden>
                            <img src="~/images/remove.png" style="width:23px;" />
                            Remove conntact
                        </div>
                    </div>
                    <div class="contact-visible">
                        <div class="row">
                            <h4>{contact-first-name} {contact-last-name}</h4>
                            <h5>{contact-email}</h5>
                        </div>
                        <div class="row">
                            <img src="~/images/remove.png" style="width:23px;" />
                            Remove conntact
                        </div>
                    </div>*@
            </div>
        </div>
    </div>
    <div class="col-md-9 " style="height:100vh;background-image:url('/images/background.png'); margin:0 auto;padding:0;">
        <div class="row">
            <div class="col-6">
                <div id="msg-container" style="position: absolute;max-height:80%; width:100%; overflow: auto;">

                </div>
            </div>
            <div style="background-color:white; height:100px;width:98%; margin-left:2%;margin-right:2%; bottom:2%; position:absolute">
                <textarea id="messageInput" style="width:90%;height:75%;margin-left:1%;margin-top:1%"></textarea>
                <img src="~/images/up.png" id="sendButton" style="width:5%;margin-left:2%;position:absolute;margin-top:1%" />
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div id="add-contact" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add Contact</h4>
            </div>
            <form asp-controller="AjaxCommands" asp-action="AddContact" data-ajax-method="post" data-ajax-success="contactSuccessfullAdd" data-ajax="true">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="#add-email">Email address:</label>
                        <input type="email" name="email" />
                        <span class="red-text" hidden>An error ocurrend!</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-default">Add</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>

    </div>
</div>
